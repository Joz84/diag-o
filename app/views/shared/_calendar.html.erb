<%= month_calendar do |date| %>
  <div class="date-day"><%= date.day %></div>
  <div class="cell-content">
    <div class="btn-container">
      <% ["8","14"].each do |hour| %>

        <!-- PAST -->
        <% unless date_in_futur(date) %>
          <% unless @dates.include? date_with_hour(date, hour) %>
            <!-- PAS DE BOOKING CE JOUR -->
          <% else %>
            <!-- LIEN VERS DIAGNOSTIC PASSÉ -->
            <%= link_to diagnostician_booking_path(@dates.index(date_with_hour(date, hour))) do %>
              <div class= "btn btn-calendar btn-calendar-booked"><i class="fa fa-eye"></i></div>
            <% end %>
          <% end %>

        <!-- FUTUR -->
        <% else %>
          <% unless @dates.include? date_with_hour(date, hour) %>
            <!-- DIAGNOSTIC DU JOUR -->
            <% if user_signed_in? %>
              <%= render "shared/button_with_data", set_at: date_with_hour(date, hour), link: Booking.new, btn_class: "btn-calendar btn-calendar-tobook" %>
            <% else %>
              <%= render "shared/button_with_data", set_at: date_with_hour(date, hour), link: new_user_registration_path, btn_class: "btn-calendar btn-calendar-tobook" %>
            <% end %>
          <% else %>
            <!-- BOOKÉ -->
            <%= link_to @bookings[@dates.index(date_with_hour(date, hour))], method: :delete do %>
              <div class= "btn btn-calendar btn-calendar-booked">
                <i class="fa fa-retweet"></i>
                <p>Non dispo</p>
              </div>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

    </div>
  </div>
<% end %>
